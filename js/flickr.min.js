function remodelar(a,b,c){$("#back-lightbox").animate({width:a,height:b,marginTop:c},600,"easeInOutQuint"),$("#nav-photos").animate({marginLeft:(a-220)/2},600,"easeInOutQuint")}function modelar(a,b){var c=($(window).height()-(b+45))/2;$("#back-lightbox").css({height:b+"px",width:a+"px","margin-top":c+"px"}),$("#nav-photos").css({"margin-left":(a-220)/2+"px"})}function buildElements(a,b){$("<div>",{id:"window",appendTo:"body"}),$("<div>",{id:"back-close",appendTo:"#window"}),$("<div>",{id:"back-lightbox",appendTo:"#window"}),$("<div>",{id:"light",appendTo:"#back-lightbox"}),$("<div>",{id:"nav-photos",appendTo:"#back-lightbox"}),$("<div>",{id:"prev-photo",text:"Anterior \xab","class":"#photo-flickr-"+a,appendTo:"#nav-photos"}),$("<div>",{id:"next-photo",text:"\xbb Pr\xf3ximo","class":"#photo-flickr-"+b,appendTo:"#nav-photos"})}function buildEventNav(){$("#prev-photo").on("click",function(){buildPrev("#prev-photo")}),$("#next-photo").on("click",function(){buildNext("#next-photo")})}function buildPrev(a){var b=$(a).attr("class"),c=$("a.lightbox-flickr").size(),d=parseInt($(b).data("id")),e=0,f=0;$("#light").width(),$("#light").height();var i=new Image;i.onload=function(){var a=($(window).height()-(i.height+45+30))/2;remodelar(i.width+30,i.height+45+30,a)},i.src=$(b).attr("href"),$("#photo-thumb").fadeOut(300,function(){$(this).attr("src",$(b).attr("href")),$(this).fadeIn(300)}),e=d==c?1:d+1,f=1==d?c:d-1,$("#prev-photo").attr("class","#photo-flickr-"+f),$("#next-photo").attr("class","#photo-flickr-"+e)}function buildNext(a){var b=$(a).attr("class"),c=$("a.lightbox-flickr").size(),d=parseInt($(b).data("id")),e=0,f=0;$("#light").width(),$("#light").height();var i=new Image;i.onload=function(){var a=($(window).height()-(i.height+45+30))/2;remodelar(i.width+30,i.height+45+30,a)},i.src=$(b).attr("href"),$("#photo-thumb").fadeOut(300,function(){$(this).attr("src",$(b).attr("href")),$(this).fadeIn(300)}),e=d==c?1:d+1,f=1==d?c:d-1,$("#prev-photo").attr("class","#photo-flickr-"+f),$("#next-photo").attr("class","#photo-flickr-"+e)}$(document).ready(function(){$(".lightbox-flickr").on("click",function(){var a=$(this).attr("href"),b=parseInt($(this).data("id")),c=$("a.lightbox-flickr").size(),d=0,e=0,f=0,g=0;e=b==c?1:b+1,d=1==b?c:b-1,buildElements(d,e),$("#light").html('<img id="photo-thumb" src="'+a+'">');var h=new Image;return h.onload=function(){g=h.height+30,f=h.width+30,modelar(f,g)},h.src=a,$("#back-close").on("click",function(){$("#window").fadeOut(300,function(){$(this).remove()})}),$("#window").hide(),$("#window").fadeIn(300),buildEventNav(),!1}),$(window).resize(function(){var a=$("#light").width(),b=$("#light").height()+45;($(window).height()-b)/2,modelar(a,b)}),$(document).on("keyup",function(a){27==a.keyCode?$("#window").fadeOut(200,function(){$(this).remove()}):37==a.keyCode?buildPrev("#prev-photo"):39==a.keyCode&&buildNext("#next-photo")})});